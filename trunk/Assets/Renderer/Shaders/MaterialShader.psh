#include "VertexShaderOutput.vsh"


//--------------------------------------------------------------------------------------
// Global variables
//--------------------------------------------------------------------------------------
float4 g_MaterialAmbientColor;      // Material's ambient color
float4 g_MaterialDiffuseColor;      // Material's diffuse color

bool g_UseTexture;

//--------------------------------------------------------------------------------------
// Texture samplers
//--------------------------------------------------------------------------------------
sampler g_MeshTexture = sampler_state
{
    MipFilter = LINEAR;
    MinFilter = LINEAR;
    MagFilter = LINEAR;
};

//--------------------------------------------------------------------------------------
// This shader outputs the pixel's color by modulating the texture's
// color with diffuse material color
//--------------------------------------------------------------------------------------
float4 main( VS_OUTPUT In ) : COLOR0
{ 
   float4 color;

    // Lookup mesh texture and modulate it with diffuse
	if (g_UseTexture)
        color = tex2D(g_MeshTexture, In.TextureUV) * g_MaterialDiffuseColor;
    else
        color = g_MaterialDiffuseColor;

    return color;
}
